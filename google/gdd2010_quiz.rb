qtd = 0
for i in 1453..4725 do 
    qtd += 1 if i%2 == 0 && i%5 == 0
end
puts qtd

qtd = 0
for i in 13608..28820 do
    qtd += 1 if i.to_s.match(/5/) && !i.to_s.match(/1/)
end
puts qtd

tels = [211191, 215767, 218418, 221911, 226681, 230478, 235269, 237046, 237377, 242358, 247156, 247741, 249938, 252541, 255862, 260770, 261635, 265317, 266178, 268961, 273089, 273942, 274144, 274379, 274488, 276188, 279065, 280686, 285028, 285477, 286432, 289780, 294530, 296809, 300499, 300840, 302397, 305738, 308699, 310840, 314994, 319952, 322704, 324940, 329886, 333765, 337451, 338628, 342188, 346972, 351154, 355544, 357535, 358681, 362439, 363265, 364595, 368488, 369466, 371357, 375130, 376640, 380338, 380356, 383199, 385718, 388811, 392924, 395742, 397707, 399667, 402071, 404259, 407222, 408641, 411817, 415467, 415668, 419006, 419474, 422466, 427044, 427201, 429570, 432254, 432946, 437474, 442326, 446092, 449611, 454097, 458419, 460821, 465288, 466200, 466602, 466712, 470780, 473295, 476582, 478189, 481489, 485651, 489421, 491283, 492921, 495734, 498251, 499143, 499174, 500369, 504984, 505436, 508052, 510768, 511315, 512840, 513015, 513846, 517150, 517206, 521730, 521778, 523343, 527105, 531606, 535124, 537052, 537537, 541423, 544430, 548292, 551063, 554551, 555969, 560292, 563547, 566368, 567460, 568784, 572637, 574254, 579022, 582640, 585229, 589652, 590069, 591599, 593288, 595194, 598496, 602345, 603128, 604702, 609408, 610896, 613008, 613160, 614937, 618687, 623048, 627473, 629590, 629883, 633084, 636380, 636792, 639635, 642147, 643341, 645529, 648266, 651451, 655274, 658329, 662398, 662424, 667083, 668132, 669338, 670036, 671670, 672449, 675460, 676264, 678060, 680108, 680506, 685217, 689136, 691973, 692436, 697112, 699134, 700135, 703091, 703478, 704234, 706448, 711319]

class GoogleMagicNumber

    attr_reader :value

    def initialize(value)
        @value = value
    end
    
    def valid?
        true if rule_a? and rule_b? and rule_c?
    end

private

    def rule_a?

        char_before = nil
        @value.to_s.each_char do |char|
            if char_before == nil
                char_before = char
            else
                if char_before == char
                    false
                    break
                end
                char_before = char
            end
        end
    end

    def rule_b?
        sum = 0
        @value.to_s.each_char do |char|
            sum += char.to_i
        end
        true if sum%2 == 0
    end

    def rule_c?
        strValue = @value.to_s
        first_number = strValue[0,1]
        last_number = strValue[strValue.length-1,1]
        true if first_number != last_number 
    end
end

qtd = 0
tels.each do |tel|
    number = GoogleMagicNumber.new(tel)
    qtd += 1 if number.valid?
end
puts qtd
